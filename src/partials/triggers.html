<form novalidate ng-class="{'form-inline': true, 'triggers-form': true, saving: saving, loading: loading}"  name="form" ng-submit="saveTriggers()">

<div class="panel panel-default" ng-repeat="timer in timers">
  <div class="panel-heading"><b>Timer {{$index + 1}}</b></div>
  <div class="panel-body" ng-controller="TimerController">
        <div class="form-group timer-line" ng-repeat="range in timer">
            from
            <input type="text" class="form-control" ng-model="range.since" />
            to
            <input type="text" class="form-control" ng-model="range.until"/>
            <a ng-click="removeRange($index)"><span class="glyphicon glyphicon-remove"></span></a>
        </div>
        <div class="form-group timer-line">
            <a ng-click="addRange()"><span class="glyphicon glyphicon-plus"></span> add</a>
        </div>
  </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading"><b>Fan</b> triggers</div>
  <div class="panel-body">

    <fieldset class="form-group sentinel-line" ng-disabled="!temperatureOptimal.active">
        Keep <b>Temperature</b> between
        <input type="text" class="form-control" ng-model="temperatureOptimal.from" />&nbsp;°C
        and
        <input type="text" class="form-control" ng-model="temperatureOptimal.to" />&nbsp;°C
        <a ng-click="toggleSentinel(temperatureOptimal)">
            <span ng-class="{glyphicon: true, 'glyphicon-ban-circle': temperatureOptimal.active, 'glyphicon-ok-circle': !temperatureOptimal.active}"></span>
        </a>
    </fieldset>
    <fieldset class="form-group sentinel-line" ng-disabled="!humidityOptimal.active">
        Keep <b>Humidity</b> between
        <input type="text" class="form-control" ng-model="humidityOptimal.from" />&nbsp;%
        and
        <input type="text" class="form-control" ng-model="humidityOptimal.to" />&nbsp;%
        <a ng-click="toggleSentinel(humidityOptimal)">
            <span ng-class="{glyphicon: true, 'glyphicon-ban-circle': humidityOptimal.active, 'glyphicon-ok-circle': !humidityOptimal.active}"></span>
        </a>
    </fieldset>

    <fieldset class="form-group sentinel-line" ng-disabled="!fanInterval.active">
            Enable <b>fan</b> every
            <input type="text" class="form-control" ng-model="fanInterval.after"/> minutes
            of inactivity for
            <input type="text" class="form-control" ng-model="fanInterval.duration"/> minutes.

            <a ng-click="toggleSentinel(fanInterval)">
                <span ng-class="{glyphicon: true, 'glyphicon-ban-circle': fanInterval.active, 'glyphicon-ok-circle': !fanInterval.active}"></span>
            </a>
    </fieldset>
    <fieldset class="form-group sentinel-line" ng-disabled="!fanCritical.active">
            Don't turn on <b>fan</b> when temperature is below
            <input type="text" class="form-control" ng-model="fanCritical.temperature"/> °C
            <a ng-click="toggleSentinel(fanCritical)">
                <span ng-class="{glyphicon: true, 'glyphicon-ban-circle': fanCritical.active, 'glyphicon-ok-circle': !fanCritical.active}"></span>
            </a>
    </fieldset>
  </div>
</div>

<div class="form-group">
    <button type="submit" class="btn btn-primary" ng-hide="saving">Save</button>
    <button type="button" class="btn btn-disabled" ng-hide="!saving">Saving...</button>
</div>

</form>
